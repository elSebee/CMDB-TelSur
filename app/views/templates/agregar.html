{% extends "base.html" %}

{% block content %}
<!-- Breadcrumb -->
<div style="display: flex; align-items: center; gap: 10px;">
    <button onclick="location.href='/'" class="btn btn-primary" style="border: none; background: none; padding: 0;">
        <i class="bi bi-house-fill" style="font-size: 22px; color: #33a3b8;"></i>
    </button>
    <p style="margin: 0;">/ {{ breadcrumb }} / Agregar</p>
</div>
<!-- Main content -->
<div class="container-fluid mt-4">
    <div style="display: flex; align-items: center; gap: 10px; background-color: #d6d4d4;">
        <button onclick="location.href='{{ url_volver }}'" class="btn btn-secondary" style="margin: 3px; display: flex; align-items: center;">
            <i class="bi bi-chevron-left" style="font-size: 20px; margin-right: 8px;"></i>
            <p style="margin: 0;">Volver</p>
        </button>        
        <p style="margin: 0;"> {{ breadcrumb }}</p>
    </div>
    
    <div class="container-fluid p-4">
        <form method="POST" action="{{ url_crear }}">
            {% for campo in campos %}
                <div class="d-flex align-items-center mb-3">
                    <div class="me-3" style="width: 100px;">
                        <label for="{{ campo.name }}" class="form-label mb-0" style="font-weight: bold;">
                            {{ campo.label }}
                        </label>
                    </div>
                    <div class="flex-grow-1" style="padding-left: 100px;">
                        {% if campo.type == 'text' %}
                            <input type="text" placeholder="Escribe {{ campo.label }}" class="form-control" id="{{ campo.name }}" name="{{ campo.name }}" {% if campo.required %} required {% endif %}>
                        {% elif campo.type == 'select' %}
                            <select class="form-select" id="{{ campo.name }}" name="{{ campo.name }}" {% if campo.required %} required {% endif %}>
                                <option value="" disabled selected>Selecciona {{ campo.label }}</option>
                                {% for option in campo.options %}
                                    <option value="{{ option }}">{{ option }}</option>
                                {% endfor %}
                            </select>

                        {% elif campo.type == 'checkbox' %}
                            <!-- Button trigger modal -->
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                                Seleccionar Servicios Involucrados con el CI
                            </button>
                    
                            <!-- Modal -->
                            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header d-flex flex-column">
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Selecciona los Servicios Involucrados con el Item...</h1>
                                            <p class="text-danger" id="staticBackdropLabel">
                                                <strong>Advertencia!</strong> Los servicios aparecerán únicamente cuando sean agregados en la pestaña <em>"Servicios"</em>.
                                            </p>
                                        </div>
                                        <div class="modal-body d-flex flex-column">
                                            {% for option in campo.options %}
                                                <div>
                                                    <input class="form-check-input" type="checkbox" id="{{ option }}" name="{{ option }}">
                                                    <label class="form-check-label" for="{{ option }}">{{ option }}</label>
                                                </div>
                                            {% endfor %}
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                            <button type="button" class="btn btn-primary">Listo</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}

            <div class="d-flex" style="margin-top: 50px;">
                <button type="submit" class="btn btn-agregar" style="background-color: #068c64; color: white;"><i class="bi bi-check"></i>Agregar</button>
            </div>


        </form>
    </div>
    
    
    
</div>
{% endblock %}